<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>  String Theory | The When of Python Blog
</title>
  <link rel="canonical" href="https://whenof.python.nz/blog/string-theory.html">

    <link rel="apple-touch-icon" href="https://whenof.python.nz/blog/apple-touch-icon.png" sizes="180x180">
    <link rel="icon" type="image/png" href="https://whenof.python.nz/blog/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://whenof.python.nz/blog/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="https://whenof.python.nz/blog/manifest.json">
    <meta name="theme-color" content="#333333">

  <link rel="stylesheet" href="https://whenof.python.nz/blog/css/darkly.bootstrap.css">
  <link rel="stylesheet" href="https://whenof.python.nz/blog/theme/css/fontawesome.min.css">
  <link rel="stylesheet" href="https://whenof.python.nz/blog/theme/css/pygments/native.min.css">
  <link rel="stylesheet" href="https://whenof.python.nz/blog/theme/css/theme.css">
  <link rel="stylesheet" href="https://whenof.python.nz/blog/css/custom.css">

  <link rel="alternate" type="application/atom+xml" title="Full Atom Feed"
        href="https://whenof.python.nz/blog/feeds/all.atom.xml">
  <link rel="alternate" type="application/atom+xml" title="Categories Atom Feed"
        href="https://whenof.python.nz/blog/feeds/python.atom.xml">  
  <meta name="description" content="Python has multiple ways of working with strings depending on the task. For inserting strings into other strings, f-strings are the preferred solution, and it is worth learning a few techniques for zero padding, displaying numbers with thousand separators, percentages, and dates.">


</head>

<body>
  <header class="header">
    <div class="container">
<div class="row">
    <div class="col-sm-4">
      <a href="https://whenof.python.nz/blog/">
        <img class="img-fluid rounded" src=https://whenof.python.nz/blog/images/logo.png alt="The When of Python Blog">
      </a>
    </div>
  <div class="col-sm-8">
    <h1 class="title"><a href="https://whenof.python.nz/blog/">The When of Python Blog</a></h1>
      <p class="text-muted">
<div class="text-muted" style="padding-bottom: 10px;">Guidance on when to use Python features (and when not to).</div>
<div class="text-muted" style="padding-bottom: 10px;">Comment your opinions on our articles to join the discussion.</div>
<div class="text-muted" style="padding-bottom: 10px;">Browse the <a href="/">When of Python catalogue</a>.</div>
<div class="text-muted" style="padding-bottom: 10px;">Follow us on <a href="https://twitter.com/WhenOfPython">Twitter</a> and <a href="https://github.com/when-of-python">GitHub</a> to get the latest updates first.</div>
</p>
      <ul class="list-inline">
          <li class="list-inline-item"><a class="fab fa-fa-brands fa-twitter" href="https://twitter.com/WhenOfPython" target="_blank"></a></li>
          <li class="list-inline-item"><a class="fab fa-fa-brands fa-github" href="https://github.com/when-of-python" target="_blank"></a></li>
      </ul>
  </div>
</div>    </div>
  </header>

  <div class="main">
    <div class="container">
      <h1>  String Theory
</h1>
      <hr>
  <article class="article">
    <header>
      <ul class="list-inline">
        <li class="list-inline-item text-muted" title="2024-04-21T07:00:00+12:00">
          <i class="fas fa-clock"></i>
          Sun 21 April 2024
        </li>
        <li class="list-inline-item">
          <i class="fas fa-folder-open"></i>
          <a href="https://whenof.python.nz/blog/category/python.html">Python</a>
        </li>
          <li class="list-inline-item">
            <i class="fas fa-user"></i>
              <a href="https://whenof.python.nz/blog/author/grant-paton-simpson.html">Grant Paton-Simpson</a>          </li>
          <li class="list-inline-item">
            <i class="fas fa-tag"></i>
              <a href="https://whenof.python.nz/blog/tag/python.html">#python</a>,               <a href="https://whenof.python.nz/blog/tag/string.html">#string</a>,               <a href="https://whenof.python.nz/blog/tag/interpolation.html">#interpolation</a>,               <a href="https://whenof.python.nz/blog/tag/concatenation.html">#concatenation</a>,               <a href="https://whenof.python.nz/blog/tag/f-strings.html">#f-strings</a>          </li>
      </ul>
    </header>
    <div class="content">
      <p>What has your experience of working with strings, especially f-strings, been? Do you agree with this post? Do you disagree? Please comment below.</p>
<h1>Concatenation, Gluing, and Interpolation</h1>
<p>Concatenation is one of the first ways we learn of joining strings together in Python, and it remains useful for simple cases, even when we learn about more sophisticated alternatives:</p>
<div class="highlight"><pre><span></span><code><span class="n">fname</span> <span class="o">=</span> <span class="s1">'Jo'</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Hello '</span> <span class="o">+</span> <span class="n">fname</span><span class="p">)</span>
</code></pre></div>

<p>'Hello Jo'</p>
<p>Glueing, or joining strings together with a glue string, is especially useful when working with a sequence of items we wish to present together:</p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="s1">' </span><span class="se">\N{WHITE HEART}</span><span class="s1"> '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">'Romeo'</span><span class="p">,</span> <span class="s1">'Juliet'</span><span class="p">]))</span>
</code></pre></div>

<p>'Romeo ü§ç Juliet'</p>
<p>In version 3.6, Python introduced formatted string literals, better known as f-strings. These make it possible to inject, or interpolate, other strings inside a larger string(<sup id="sf-string-theory-1-back"><a href="#sf-string-theory-1" class="simple-footnote" title="or expressions resulting in strings, or anything which has a __str__ method">1</a></sup>). f-strings are more readable than the alternative approaches Python had used earlier - namely sprint and the format method.</p>
<div class="highlight"><pre><span></span><code><span class="c1">## sprint</span>
<span class="n">fname</span> <span class="o">=</span> <span class="s1">'Elon'</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Hello </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="n">fname</span><span class="p">)</span>
</code></pre></div>

<p>'Hello Elon'</p>
<div class="highlight"><pre><span></span><code><span class="n">lname</span> <span class="o">=</span> <span class="s1">'Musk'</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Hello </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">"</span> <span class="o">%</span> <span class="p">(</span><span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="p">))</span>
</code></pre></div>

<p>'Hello Elon Musk'</p>
<div class="highlight"><pre><span></span><code><span class="c1">## format</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"Hello </span><span class="si">{fname}</span><span class="s2"> </span><span class="si">{lname}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="n">fname</span><span class="p">,</span> <span class="n">lname</span><span class="o">=</span><span class="n">lname</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="si">{unit_id:0&gt;10}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">unit_id</span><span class="o">=</span><span class="s2">"ABC1234"</span><span class="p">))</span>  <span class="c1">## just showing how powerful the format method can become</span>
</code></pre></div>

<p>'Hello Elon Musk'</p>
<p>'000ABC1234'</p>
<div class="highlight"><pre><span></span><code><span class="c1">## f-string</span>
<span class="n">fname</span> <span class="o">=</span> <span class="s1">'Elon'</span>
<span class="n">lname</span> <span class="o">=</span> <span class="s1">'Musk'</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">fname</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">lname</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>'Elon Musk'</p>
<h1>When Not to Use f-string Interpolation</h1>
<p>The first question is whether interpolation should be used at all. Sometimes there is a more elegant solution using string methods.</p>
<div class="highlight"><pre><span></span><code><span class="n">word</span> <span class="o">=</span> <span class="s1">'crocodile'</span>

<span class="c1">## f-string overkill</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">word</span><span class="si">:</span><span class="s2">*^30</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="c1">## semantic string method</span>
<span class="nb">print</span><span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="s1">'*'</span><span class="p">))</span>
</code></pre></div>

<p>'**********crocodile***********'</p>
<p>'**********crocodile***********'</p>
<p>In other cases interpolation of any sort is not a good idea from a security point of view. If strings are being built from variables which in any way come from user input they open up vulnerabilities like SQL injection attacks. Here is the warning from the older psycopg docs: ‚ÄúNever, never, NEVER use Python string concatenation (+) or string parameters interpolation (%) to pass variables to a SQL query string. Not even at gunpoint.‚Äù And in newer documentation it says:</p>
<blockquote>
<p>Don‚Äôt manually merge values to a query: hackers from a foreign country will break into your computer and steal not only your disks, but also your cds, leaving you only with the three most embarrassing records you ever bought. On cassette tapes.
If you use the % operator to merge values to a query, con artists will seduce your cat, who will run away taking your credit card and your sunglasses with them.
If you use + to merge a textual value to a string, bad guys in balaclava will find their way to your fridge, drink all your beer, and leave your toilet seat up and your toilet paper in the wrong orientation.
You don‚Äôt want to manually merge values to a query: use the provided methods instead. <a href="https://www.psycopg.org/psycopg3/docs/basic/params.html">Passing parameters to SQL queries</a></p>
</blockquote>
<p>Even if interpolation is appropriate, it will sometimes be best to use an alternative to f-strings. The main situation in which it makes sense to use sprint or the format method instead is when the main string contains lots of curly braces and it is inefficient to escape all of them. And template strings might be best for untrusted user input <a href="https://realpython.com/python-string-formatting/#4-template-strings-standard-library">Python String Formatting Best Practices</a></p>
<h1>f-string Tips (Format Strings)</h1>
<p>f-strings have a mini formatting language. Here are four useful tricks (for more, see <a href="https://pybit.es/articles/python-f-string-codes-i-use-every-day/">Python F-String Codes I Use Every Day</a>
):</p>
<h2>Zero-Padding</h2>
<div class="highlight"><pre><span></span><code><span class="n">a</span> <span class="o">=</span> <span class="mi">12345</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">a</span><span class="si">:</span><span class="s2">0&gt;10</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>'0000012345'</p>
<h2>Commas in Numbers</h2>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">a</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>'12,345'</p>
<h2>Percentages</h2>
<div class="highlight"><pre><span></span><code><span class="n">num</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">num</span><span class="si">:</span><span class="s2">.0%</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>'50%'</p>
<h2>Dates</h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="si">:</span><span class="s2">%Y-%m-%d</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>

<p>'2024-04-21'</p><ol class="simple-footnotes"><li id="sf-string-theory-1">or expressions resulting in strings, or anything which has a __str__ method <a href="#sf-string-theory-1-back" class="simple-footnote-back">‚Ü©</a></li></ol>
    </div>
  </article>
<div id="comments">
  <div id="comments-inner">
    <div id="manual-commenting"></div>
    <script src="https://utteranc.es/client.js"
            repo="when-of-python/blog"
            issue-term="pathname"
            theme="github-dark-orange"
            crossorigin="anonymous"
            async>
    </script>
  </div>
  <script src="https://whenof.python.nz/blog/js/comments.js"></script>
</div>    </div>
  </div>

  <footer class="footer">
    <div class="container">
<div class="row">
  <ul class="col-sm-6 list-inline">
      <li class="list-inline-item"><a href="https://whenof.python.nz/blog/authors.html">Authors</a></li>
    <li class="list-inline-item"><a href="https://whenof.python.nz/blog/archives.html">Archives</a></li>
    <li class="list-inline-item"><a href="https://whenof.python.nz/blog/categories.html">Categories</a></li>
      <li class="list-inline-item"><a href="https://whenof.python.nz/blog/tags.html">Tags</a></li>
  </ul>
  <p class="col-sm-6 text-sm-right text-muted">
    Generated by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
    / <a href="https://github.com/nairobilug/pelican-alchemy" target="_blank">&#x2728;</a>
  </p>
</div>    </div>
  </footer>

</body>

</html>